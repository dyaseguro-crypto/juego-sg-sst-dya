<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>El Juego del SG-SST - DYA Gesti√≥n Preventiva</title>
    
    <!-- Meta Tags para Redes Sociales -->
    <meta property="og:title" content="El Juego del SG-SST - DYA Gesti√≥n Preventiva">
    <meta property="og:description" content="¬øSabes cu√°nto conoces sobre los Est√°ndares M√≠nimos del SG-SST de tu empresa? ¬°Juega y desc√∫brelo!">
    <meta property="og:image" content="https://dyaseguro-crypto.github.io/formulario-contacto/logo-dya.png">
    <meta property="og:url" content="https://dyaseguro-crypto.github.io/juego-sg-sst-dya">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="DYA Gesti√≥n Preventiva SST">

    <!-- Para Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="El Juego del SG-SST - DYA Gesti√≥n Preventiva">
    <meta name="twitter:description" content="Eval√∫a tus conocimientos sobre SG-SST con este juego interactivo">
    <meta name="twitter:image" content="https://dyaseguro-crypto.github.io/formulario-contacto/logo-dya.png">

    <style>
        :root {
            --color-primary: #003366;
            --color-secondary: #00cc66;
            --color-accent: #00994d;
            --color-light: #f5f9ff;
            --color-dark: #00264d;
            --color-gold: #ffd700;
            --color-next: #6a5acd;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, var(--color-light) 0%, #e6f2ff 100%);
            color: var(--color-dark);
            line-height: 1.6;
            min-height: 100vh;
            padding: 15px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        header {
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-dark) 100%);
            color: white;
            padding: 20px 15px;
            border-radius: 12px 12px 0 0;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .logo {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .motto {
            font-size: 14px;
            opacity: 0.9;
            font-style: italic;
            margin-bottom: 10px;
        }
        
        .game-title {
            font-size: 28px;
            font-weight: bold;
            margin: 15px 0 8px;
        }
        
        .game-subtitle {
            font-size: 16px;
            margin-bottom: 10px;
            opacity: 0.9;
        }
        
        .game-container {
            background-color: white;
            border-radius: 0 0 12px 12px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
            padding: 25px 20px;
            margin-bottom: 15px;
            border: 1px solid #e0e0e0;
        }
        
        .step {
            display: none;
        }
        
        .step.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        h1, h2, h3 {
            color: var(--color-primary);
            margin-bottom: 15px;
        }
        
        h1 {
            font-size: 24px;
            text-align: center;
        }
        
        h2 {
            font-size: 20px;
        }
        
        .question {
            margin-bottom: 20px;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 15px;
        }
        
        .option {
            padding: 12px 15px;
            background-color: var(--color-light);
            border: 2px solid #d1e0ff;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 15px;
        }
        
        .option:hover {
            background-color: var(--color-secondary);
            color: white;
            border-color: var(--color-secondary);
            transform: translateY(-2px);
        }
        
        .option.selected {
            background-color: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
        }
        
        .option.correct {
            background-color: var(--color-secondary);
            color: white;
            border-color: var(--color-secondary);
        }
        
        .option.incorrect {
            background-color: #ff6b6b;
            color: white;
            border-color: #ff6b6b;
        }
        
        .btn {
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            margin-top: 20px;
            display: block;
            width: 100%;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--color-secondary) 0%, var(--color-accent) 100%);
        }
        
        .btn-next {
            background: linear-gradient(135deg, var(--color-next) 0%, #7b68ee 100%);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .btn:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
        }
        
        .progress-container {
            margin: 20px 0;
        }
        
        .progress-label {
            font-size: 16px;
            font-weight: bold;
            color: var(--color-primary);
            margin-bottom: 8px;
            text-align: center;
        }
        
        .progress-bar {
            height: 12px;
            background-color: #e6e6e6;
            border-radius: 6px;
            overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(90deg, var(--color-secondary) 0%, var(--color-accent) 100%);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 6px;
        }
        
        .result {
            text-align: center;
            padding: 15px;
        }
        
        .score {
            font-size: 60px;
            font-weight: bold;
            color: var(--color-primary);
            margin: 20px 0;
        }
        
        .score-perfect {
            color: var(--color-gold);
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .crack-message {
            font-size: 24px;
            font-weight: bold;
            color: var(--color-gold);
            margin: 12px 0;
        }
        
        .contact-info {
            background: linear-gradient(135deg, #f0f8ff 0%, #e6f2ff 100%);
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
            border-left: 5px solid var(--color-secondary);
        }
        
        .classification-options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-top: 20px;
        }
        
        @media (min-width: 480px) {
            .classification-options {
                grid-template-columns: 1fr 1fr;
            }
        }
        
        .classification-option {
            padding: 18px 15px;
            background-color: var(--color-light);
            border: 2px solid #d1e0ff;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        
        .classification-option:hover {
            background-color: var(--color-secondary);
            color: white;
            border-color: var(--color-secondary);
            transform: translateY(-3px);
        }
        
        .classification-option.selected {
            background-color: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
        }
        
        .risk-options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin-top: 20px;
        }
        
        @media (min-width: 480px) {
            .risk-options {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        .risk-option {
            padding: 15px 10px;
            background-color: var(--color-light);
            border: 2px solid #d1e0ff;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        
        .risk-option:hover {
            background-color: var(--color-secondary);
            color: white;
            border-color: var(--color-secondary);
            transform: translateY(-3px);
        }
        
        .risk-option.selected {
            background-color: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
        }
        
        .footer {
            text-align: center;
            font-size: 13px;
            color: #666;
            margin-top: 20px;
            padding: 12px;
            background-color: white;
            border-radius: 8px;
        }
        
        .contact-link {
            display: inline-block;
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-dark) 100%);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            margin-top: 12px;
            transition: all 0.3s ease;
        }
        
        .contact-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .info-box {
            background-color: #e6f7ff;
            border-left: 4px solid var(--color-secondary);
            padding: 12px;
            margin: 15px 0;
            border-radius: 4px;
        }
        
        .classification-summary {
            background: linear-gradient(135deg, #f8fffe 0%, #e6fff9 100%);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border: 2px solid var(--color-secondary);
        }
        
        .feedback {
            text-align: center;
            margin: 12px 0;
            font-weight: bold;
            min-height: 22px;
        }
        
        .positive-feedback {
            color: var(--color-secondary);
        }
        
        .negative-feedback {
            color: #ff6b6b;
        }
        
        .question-counter {
            text-align: center;
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
        }

        .debug-info {
            font-size: 12px;
            color: #999;
            text-align: center;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">DYA GESTI√ìN PREVENTIVA SST S.A.S</div>
            <div class="motto">Gestionamos los riesgos hoy para asegurar el futuro de tu empresa</div>
            <div class="game-title">El Juego del SG-SST</div>
            <div class="game-subtitle">¬øQu√© sabes acerca de la Auditor√≠a de Est√°ndares M√≠nimos del SG-SST de tu empresa?</div>
        </header>
        
        <div class="game-container">
            <!-- Paso 1: Introducci√≥n -->
            <div id="step-intro" class="step active">
                <h1>¬°Bienvenido al Juego del SG-SST!</h1>
                <p>Este juego interactivo te ayudar√° a evaluar tus conocimientos sobre los Est√°ndares M√≠nimos del Sistema de Gesti√≥n de Seguridad y Salud en el Trabajo (SG-SST).</p>
                
                <div class="info-box">
                    <p><strong>Nota:</strong> Esta es una herramienta de sensibilizaci√≥n de DYA Gesti√≥n Preventiva SST SAS y no sustituye una auditor√≠a formal.</p>
                </div>
                
                <button id="btn-start" class="btn btn-primary">Comenzar Evaluaci√≥n</button>
            </div>
            
            <!-- Paso 2: Clasificaci√≥n por n√∫mero de trabajadores -->
            <div id="step-workers" class="step">
                <h2>Clasificaci√≥n de tu empresa</h2>
                <p>Selecciona el rango de trabajadores de tu empresa:</p>
                <div class="classification-options">
                    <div class="classification-option" data-value="1-10">1-10 trabajadores</div>
                    <div class="classification-option" data-value="11-50">11-50 trabajadores</div>
                    <div class="classification-option" data-value="51+">51 o m√°s trabajadores</div>
                </div>
                <button id="btn-next-risk" class="btn btn-primary" disabled>Siguiente</button>
            </div>
            
            <!-- Paso 3: Clasificaci√≥n por nivel de riesgo -->
            <div id="step-risk" class="step">
                <h2>Nivel de riesgo de tu empresa</h2>
                <p>Selecciona el nivel de riesgo de tu empresa seg√∫n la clasificaci√≥n de la ARL:</p>
                <div class="risk-options">
                    <div class="risk-option" data-value="I">Riesgo I (M√≠nimo)</div>
                    <div class="risk-option" data-value="II">Riesgo II (Bajo)</div>
                    <div class="risk-option" data-value="III">Riesgo III (Medio)</div>
                    <div class="risk-option" data-value="IV">Riesgo IV (Alto)</div>
                    <div class="risk-option" data-value="V">Riesgo V (M√°ximo)</div>
                </div>
                
                <div class="classification-summary" id="classification-info">
                    <!-- La informaci√≥n de clasificaci√≥n se actualizar√° aqu√≠ -->
                </div>
                
                <button id="btn-start-quiz" class="btn btn-primary" disabled>Iniciar Evaluaci√≥n</button>
            </div>
            
            <!-- Paso 4: Preguntas -->
            <div id="step-questions" class="step">
                <h2>Tu juego est√° activo</h2>
                <div class="progress-container">
                    <div class="progress-label">Progreso del juego</div>
                    <div class="progress-bar">
                        <div class="progress" id="quiz-progress"></div>
                    </div>
                </div>
                <div class="question-counter" id="question-counter">Pregunta 1 de 10</div>
                <div class="feedback" id="question-feedback"></div>
                <div id="question-container">
                    <!-- Las preguntas se cargar√°n aqu√≠ din√°micamente -->
                </div>
                <button id="btn-next-question" class="btn btn-next" disabled>Siguiente Pregunta</button>
                <div class="debug-info" id="debug-info"></div>
            </div>
            
            <!-- Paso 5: Resultados -->
            <div id="step-results" class="step">
                <div class="result">
                    <h2>Resultados de tu evaluaci√≥n</h2>
                    <div class="score" id="final-score">0%</div>
                    <div id="crack-message" class="crack-message" style="display: none;">¬°Eres un Crack!</div>
                    <p id="result-message"></p>
                    
                    <div id="advice-container">
                        <div class="contact-info">
                            <h3>Pide una asesor√≠a especializada con DYA Gesti√≥n Preventiva SST</h3>
                            <p>Te mostramos c√≥mo desarrollar una Cultura Preventiva Sostenible.</p>
                            
                            <p><strong>Contacto:</strong></p>
                            <p>üìß dya.seguro@gmail.com</p>
                            <p>üì± +57 3133885021</p>
                            <p>üìç Bucaramanga / Colombia</p>
                            
                            <a href="https://dyaseguro-crypto.github.io/formulario-contacto/" class="contact-link" target="_blank">
                                Solicitar Asesor√≠a Gratuita
                            </a>
                        </div>
                    </div>
                    
                    <button id="btn-restart" class="btn btn-primary">Realizar Otra Evaluaci√≥n</button>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>Este juego est√° basado en la Resoluci√≥n 0312 de 2019 y el Decreto 1072 de 2015. Es una herramienta educativa de DYA Gesti√≥n Preventiva SST SAS.</p>
        </div>
    </div>

    <script>
        // Variables globales
        let currentStep = 'step-intro';
        let companySize = '';
        let riskLevel = '';
        let totalQuestions = 0;
        let currentQuestionIndex = 0;
        let score = 0;
        let questions = [];
        
        // Banco de preguntas por categor√≠a - AMPLIADO para tener suficientes preguntas
        const questionBank = {
            '1-10': [
                {
                    question: "Seg√∫n la Resoluci√≥n 0312 de 2019, ¬øqui√©n puede dise√±ar el SG-SST para empresas de hasta 10 trabajadores con riesgo I, II o III?",
                    options: [
                        "Cualquier trabajador de la empresa",
                        "Un t√©cnico en SST con licencia vigente, m√≠nimo 1 a√±o de experiencia y curso virtual de 50 horas",
                        "Solo un profesional con posgrado en SST",
                        "No es necesario dise√±ar un SG-SST formal"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe incluir el Plan Anual de Trabajo del SG-SST seg√∫n los est√°ndares m√≠nimos?",
                    options: [
                        "Solo los objetivos generales",
                        "Objetivos, metas, responsabilidades, recursos y cronograma anual",
                        "Solo el cronograma de actividades",
                        "No es necesario un Plan Anual para empresas peque√±as"
                    ],
                    correct: 1
                },
                {
                    question: "¬øCon qu√© periodicidad debe realizarse la identificaci√≥n de peligros y evaluaci√≥n de riesgos?",
                    options: [
                        "Cada 5 a√±os",
                        "Solo cuando ocurra un accidente",
                        "Con acompa√±amiento de la ARL y cuando haya cambios significativos",
                        "No es obligatorio para empresas peque√±as"
                    ],
                    correct: 2
                },
                {
                    question: "¬øQui√©nes pueden realizar las evaluaciones m√©dicas ocupacionales?",
                    options: [
                        "Cualquier m√©dico general",
                        "M√©dicos especialistas en medicina del trabajo o SST con licencia vigente",
                        "Solo el personal de la ARL",
                        "No son obligatorias para empresas peque√±as"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe contener la pol√≠tica de SST para empresas peque√±as?",
                    options: [
                        "Solo el compromiso gen√©rico de la empresa",
                        "Debe estar escrita, firmada, fechada y comunicada a todos los trabajadores",
                        "Solo los objetivos generales de seguridad",
                        "No es necesaria una pol√≠tica formal"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe incluir el programa de capacitaci√≥n anual en SST?",
                    options: [
                        "Solo inducci√≥n general",
                        "Contenido sobre peligros/riesgos prioritarios y medidas de prevenci√≥n y control",
                        "Solo temas seleccionados por la ARL",
                        "No es obligatorio un programa formal"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© documentos deben archivarse seg√∫n los est√°ndares m√≠nimos para empresas peque√±as?",
                    options: [
                        "Solo los contratos de trabajo",
                        "Pol√≠tica de SST, identificaci√≥n de peligros, conceptos de ex√°menes m√©dicos, plan de emergencias, entre otros",
                        "Solo los reportes de accidentes",
                        "No se especifica en la normativa"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe incluir el plan de prevenci√≥n, preparaci√≥n y respuesta ante emergencias para empresas peque√±as?",
                    options: [
                        "Solo los n√∫meros de emergencia",
                        "Identificaci√≥n de amenazas, evaluaci√≥n de vulnerabilidad y se√±alizaci√≥n b√°sica",
                        "Solo la lista de brigadistas",
                        "No es obligatorio para empresas peque√±as"
                    ],
                    correct: 1
                }
            ],
            '11-50': [
                {
                    question: "¬øQu√© perfil debe tener la persona que dise√±a el SG-SST para empresas de 11 a 50 trabajadores con riesgo I, II o III?",
                    options: [
                        "Cualquier trabajador designado por la empresa",
                        "Tecn√≥logo en SST con licencia vigente, 2 a√±os de experiencia y curso virtual de 50 horas",
                        "Solo profesionales con maestr√≠a en SST",
                        "No se requiere un perfil espec√≠fico"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© comit√© debe conformarse en empresas de 11 a 50 trabajadores?",
                    options: [
                        "Solo el COPASST",
                        "COPASST y Comit√© de Convivencia Laboral",
                        "No es necesario conformar comit√©s",
                        "Solo el Comit√© de Convivencia Laboral"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe incluir el programa de capacitaci√≥n anual en SST?",
                    options: [
                        "Solo inducci√≥n general",
                        "Contenido sobre peligros/riesgos prioritarios y medidas de prevenci√≥n y control",
                        "Solo temas seleccionados por la ARL",
                        "No es obligatorio un programa formal"
                    ],
                    correct: 1
                },
                {
                    question: "¬øCon qu√© periodicidad debe realizarse la revisi√≥n por la alta direcci√≥n del SG-SST?",
                    options: [
                        "Cada 5 a√±os",
                        "Cada 2 a√±os",
                        "Como m√≠nimo una vez al a√±o",
                        "No es obligatoria para este tipo de empresas"
                    ],
                    correct: 2
                },
                {
                    question: "¬øQu√© debe contener la pol√≠tica de SST?",
                    options: [
                        "Solo el compromiso gen√©rico de la empresa",
                        "Debe estar escrita, firmada, fechada y comunicada al COPASST y a todos los trabajadores",
                        "Solo los objetivos generales de seguridad",
                        "No es necesaria una pol√≠tica formal"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© documentos deben archivarse seg√∫n los est√°ndares m√≠nimos?",
                    options: [
                        "Solo los contratos de trabajo",
                        "Pol√≠tica de SST, identificaci√≥n de peligros, conceptos de ex√°menes m√©dicos, plan de emergencias, entre otros",
                        "Solo los reportes de accidentes",
                        "No se especifica en la normativa"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe incluir el plan de prevenci√≥n, preparaci√≥n y respuesta ante emergencias?",
                    options: [
                        "Solo los n√∫meros de emergencia",
                        "Identificaci√≥n de amenazas, evaluaci√≥n de vulnerabilidad, planos, se√±alizaci√≥n y simulacros anuales",
                        "Solo la lista de brigadistas",
                        "No es obligatorio para empresas de este tama√±o"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe incluir la matriz legal del SG-SST?",
                    options: [
                        "Solo la Resoluci√≥n 0312 de 2019",
                        "Normas vigentes en riesgos laborales aplicables a la empresa",
                        "Todas las normas colombianas vigentes",
                        "No es obligatoria una matriz legal"
                    ],
                    correct: 1
                },
                {
                    question: "¬øCon qu√© periodicidad debe realizarse la identificaci√≥n de peligros?",
                    options: [
                        "Cada 5 a√±os",
                        "Cada 2 a√±os",
                        "Como m√≠nimo una vez al a√±o y cuando ocurran cambios significativos",
                        "Solo cuando lo solicite la ARL"
                    ],
                    correct: 2
                },
                {
                    question: "¬øQu√© indicadores m√≠nimos de SST debe medir la empresa?",
                    options: [
                        "Solo la frecuencia de accidentalidad",
                        "Frecuencia y severidad de accidentalidad",
                        "Solo los que determine la ARL",
                        "No es obligatorio medir indicadores"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe hacer la empresa cuando se detecta que las medidas de prevenci√≥n son inadecuadas?",
                    options: [
                        "Solo documentar la situaci√≥n",
                        "Tomar medidas correctivas, preventivas y/o de mejora",
                        "Esperar a que ocurra un accidente",
                        "Notificar a la ARL y esperar instrucciones"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© informaci√≥n debe recolectarse para el diagn√≥stico de condiciones de salud?",
                    options: [
                        "Solo la edad y sexo de los trabajadores",
                        "Descripci√≥n sociodemogr√°fica y caracterizaci√≥n de condiciones de salud de todos los trabajadores",
                        "Solo los resultados de ex√°menes m√©dicos",
                        "No es obligatorio este diagn√≥stico"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe incluir el procedimiento para evaluaci√≥n y selecci√≥n de proveedores y contratistas?",
                    options: [
                        "Solo requisitos econ√≥micos",
                        "Aspectos de SST que permitan verificar el cumplimiento de est√°ndares m√≠nimos",
                        "Solo experiencia en el sector",
                        "No se requiere un procedimiento formal"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe hacer la empresa con las recomendaciones m√©dicas laborales?",
                    options: [
                        "Archivarlas para futura referencia",
                        "Cumplir las recomendaciones y restricciones emitidas por EPS y ARL",
                        "Solo considerarlas si el trabajador las solicita",
                        "No es obligatorio su cumplimiento"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe incluir el procedimiento de gesti√≥n del cambio?",
                    options: [
                        "Solo los cambios de personal",
                        "Evaluaci√≥n del impacto sobre SST por cambios internos o externos",
                        "Solo cambios en los procesos productivos",
                        "No se requiere un procedimiento formal"
                    ],
                    correct: 1
                },
                {
                    question: "¬øCon qu√© periodicidad debe realizarse la auditor√≠a interna al SG-SST?",
                    options: [
                        "Cada 3 a√±os",
                        "Cada 2 a√±os",
                        "Anualmente, planificada con participaci√≥n del COPASST",
                        "Solo cuando lo solicite el Ministerio del Trabajo"
                    ],
                    correct: 2
                },
                {
                    question: "¬øQu√© debe incluir el programa de vigilancia epidemiol√≥gica?",
                    options: [
                        "Solo el registro de ausentismo",
                        "Seguimiento a indicadores de morbilidad y ausentismo por enfermedad com√∫n y laboral",
                        "Solo los ex√°menes m√©dicos ocupacionales",
                        "No es obligatorio para empresas de este tama√±o"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe contener el programa de inspecciones de seguridad?",
                    options: [
                        "Solo lista de verificaci√≥n b√°sica",
                        "Planificaci√≥n, metodolog√≠a, frecuencia, responsables y seguimiento",
                        "Solo los reportes de hallazgos",
                        "No es obligatorio un programa formal"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe incluir el procedimiento de investigaci√≥n de incidentes y accidentes?",
                    options: [
                        "Solo el formato de reporte",
                        "Metodolog√≠a, responsables, plazos y medidas correctivas",
                        "Solo la notificaci√≥n a la ARL",
                        "No es obligatorio un procedimiento formal"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe contener el programa de mantenimiento preventivo?",
                    options: [
                        "Solo el cronograma de mantenimiento",
                        "Equipos, frecuencia, procedimientos y responsables",
                        "Solo los manuales de los equipos",
                        "No es obligatorio para empresas de este tama√±o"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe incluir el sistema de reporte de condiciones de trabajo?",
                    options: [
                        "Solo el formato de reporte",
                        "Mecanismos, responsables, plazos y seguimiento",
                        "Solo la comunicaci√≥n verbal",
                        "No es obligatorio un sistema formal"
                    ],
                    correct: 1
                }
            ],
            '51+': [
                {
                    question: "¬øQu√© perfil debe tener la persona que dise√±a e implementa el SG-SST para empresas de m√°s de 50 trabajadores?",
                    options: [
                        "Cualquier profesional designado por la empresa",
                        "Profesionales en SST o con posgrado en SST, con licencia vigente y curso virtual de 50 horas",
                        "Solo ingenieros industriales",
                        "No se requiere un perfil espec√≠fico"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe incluir la matriz legal del SG-SST?",
                    options: [
                        "Solo la Resoluci√≥n 0312 de 2019",
                        "Normas vigentes en riesgos laborales aplicables a la empresa y normas t√©cnicas seg√∫n los peligros identificados",
                        "Todas las normas colombianas vigentes",
                        "No es obligatoria una matriz legal"
                    ],
                    correct: 1
                },
                {
                    question: "¬øCon qu√© periodicidad debe realizarse la identificaci√≥n de peligros con participaci√≥n de los trabajadores?",
                    options: [
                        "Cada 5 a√±os",
                        "Cada 2 a√±os",
                        "Como m√≠nimo una vez al a√±o y cuando ocurran cambios significativos",
                        "Solo cuando lo solicite la ARL"
                    ],
                    correct: 2
                },
                {
                    question: "¬øQu√© indicadores m√≠nimos de SST debe medir la empresa?",
                    options: [
                        "Solo la frecuencia de accidentalidad",
                        "Frecuencia y severidad de accidentalidad, proporci√≥n de accidentes mortales, prevalencia e incidencia de enfermedad laboral y ausentismo",
                        "Solo los que determine la ARL",
                        "No es obligatorio medir indicadores"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe incluir el procedimiento de gesti√≥n del cambio?",
                    options: [
                        "Solo los cambios de personal",
                        "Evaluaci√≥n del impacto sobre SST por cambios internos o externos",
                        "Solo cambios en los procesos productivos",
                        "No se requiere un procedimiento formal"
                    ],
                    correct: 1
                },
                {
                    question: "¬øCon qu√© periodicidad debe realizarse la auditor√≠a interna al SG-SST?",
                    options: [
                        "Cada 3 a√±os",
                        "Cada 2 a√±os",
                        "Anualmente, planificada con participaci√≥n del COPASST",
                        "Solo cuando lo solicite el Ministerio del Trabajo"
                    ],
                    correct: 2
                },
                {
                    question: "¬øQu√© debe hacer la empresa cuando se detecta que las medidas de prevenci√≥n son inadecuadas?",
                    options: [
                        "Solo documentar la situaci√≥n",
                        "Tomar medidas correctivas, preventivas y/o de mejora",
                        "Esperar a que ocurra un accidente",
                        "Notificar a la ARL y esperar instrucciones"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© informaci√≥n debe recolectarse para el diagn√≥stico de condiciones de salud?",
                    options: [
                        "Solo la edad y sexo de los trabajadores",
                        "Descripci√≥n sociodemogr√°fica y caracterizaci√≥n de condiciones de salud de todos los trabajadores",
                        "Solo los resultados de ex√°menes m√©dicos",
                        "No es obligatorio este diagn√≥stico"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe incluir el procedimiento para evaluaci√≥n y selecci√≥n de proveedores y contratistas?",
                    options: [
                        "Solo requisitos econ√≥micos",
                        "Aspectos de SST que permitan verificar el cumplimiento de est√°ndares m√≠nimos",
                        "Solo experiencia en el sector",
                        "No se requiere un procedimiento formal"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe hacer la empresa con las recomendaciones m√©dicas laborales?",
                    options: [
                        "Archivarlas para futura referencia",
                        "Cumplir las recomendaciones y restricciones emitidas por EPS y ARL",
                        "Solo considerarlas si el trabajador las solicita",
                        "No es obligatorio su cumplimiento"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe incluir el programa de vigilancia epidemiol√≥gica?",
                    options: [
                        "Solo el registro de ausentismo",
                        "Seguimiento a indicadores de morbilidad y ausentismo por enfermedad com√∫n y laboral",
                        "Solo los ex√°menes m√©dicos ocupacionales",
                        "No es obligatorio para empresas de este tama√±o"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe contener el programa de inspecciones de seguridad?",
                    options: [
                        "Solo lista de verificaci√≥n b√°sica",
                        "Planificaci√≥n, metodolog√≠a, frecuencia, responsables y seguimiento",
                        "Solo los reportes de hallazgos",
                        "No es obligatorio un programa formal"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe incluir el procedimiento de investigaci√≥n de incidentes y accidentes?",
                    options: [
                        "Solo el formato de reporte",
                        "Metodolog√≠a, responsables, plazos y medidas correctivas",
                        "Solo la notificaci√≥n a la ARL",
                        "No es obligatorio un procedimiento formal"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe contener el programa de mantenimiento preventivo?",
                    options: [
                        "Solo el cronograma de mantenimiento",
                        "Equipos, frecuencia, procedimientos y responsables",
                        "Solo los manuales de los equipos",
                        "No es obligatorio para empresas de este tama√±o"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe incluir el sistema de reporte de condiciones de trabajo?",
                    options: [
                        "Solo el formato de reporte",
                        "Mecanismos, responsables, plazos y seguimiento",
                        "Solo la comunicaci√≥n verbal",
                        "No es obligatorio un sistema formal"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe contener el programa de inducci√≥n y reinducci√≥n en SST?",
                    options: [
                        "Solo informaci√≥n general de la empresa",
                        "Contenidos espec√≠ficos seg√∫n el cargo y los riesgos asociados",
                        "Solo el reglamento interno de trabajo",
                        "No es obligatorio un programa formal"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe incluir el procedimiento de permisos de trabajo?",
                    options: [
                        "Solo el formato de permiso",
                        "Tipos de permisos, autorizaciones, condiciones y controles",
                        "Solo la firma del supervisor",
                        "No es obligatorio un procedimiento formal"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe contener el programa de gesti√≥n documental del SG-SST?",
                    options: [
                        "Solo los formatos b√°sicos",
                        "Control de documentos, versiones, distribuci√≥n y archivo",
                        "Solo los manuales de procedimiento",
                        "No es obligatorio un programa formal"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe incluir el sistema de gesti√≥n de elementos de protecci√≥n personal?",
                    options: [
                        "Solo la entrega de EPP",
                        "Evaluaci√≥n, selecci√≥n, dotaci√≥n, uso y mantenimiento",
                        "Solo el inventario de EPP",
                        "No es obligatorio un sistema formal"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe contener el programa de orden y aseo?",
                    options: [
                        "Solo limpieza general",
                        "Est√°ndares, responsables, frecuencia y verificaci√≥n",
                        "Solo la se√±alizaci√≥n de √°reas",
                        "No es obligatorio un programa formal"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe incluir el procedimiento de preparaci√≥n y respuesta ante emergencias?",
                    options: [
                        "Solo los n√∫meros de emergencia",
                        "Identificaci√≥n de amenazas, evaluaci√≥n de vulnerabilidad, planos, se√±alizaci√≥n y simulacros anuales",
                        "Solo la lista de brigadistas",
                        "No es obligatorio un procedimiento formal"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe contener el programa de prevenci√≥n de consumo de alcohol y sustancias psicoactivas?",
                    options: [
                        "Solo la prohibici√≥n general",
                        "Pol√≠tica, capacitaci√≥n, seguimiento y apoyo",
                        "Solo los ex√°menes m√©dicos",
                        "No es obligatorio un programa formal"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe incluir el sistema de gesti√≥n de contratistas?",
                    options: [
                        "Solo el contrato de servicios",
                        "Evaluaci√≥n, selecci√≥n, seguimiento y control de SST",
                        "Solo la verificaci√≥n de la ARL",
                        "No es obligatorio un sistema formal"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe contener el programa de promoci√≥n de la salud?",
                    options: [
                        "Solo campa√±as espor√°dicas",
                        "Actividades planificadas seg√∫n diagn√≥stico de salud",
                        "Solo informaci√≥n general de salud",
                        "No es obligatorio un programa formal"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe incluir el procedimiento de monitoreo ambiental?",
                    options: [
                        "Solo mediciones b√°sicas",
                        "Planificaci√≥n, metodolog√≠a, frecuencia y seguimiento",
                        "Solo los formatos de medici√≥n",
                        "No es obligatorio un procedimiento formal"
                    ],
                    correct: 1
                },
                {
                    question: "¬øQu√© debe contener el sistema de gesti√≥n de riesgos psicosociales?",
                    options: [
                        "Solo encuestas espor√°dicas",
                        "Evaluaci√≥n, intervenci√≥n y seguimiento sistem√°tico",
                        "Solo el buz√≥n de sugerencias",
                        "No es obligatorio un sistema formal"
                    ],
                    correct: 1
                }
            ]
        };
        
        // Elementos DOM
        const steps = document.querySelectorAll('.step');
        const btnStart = document.getElementById('btn-start');
        const btnNextRisk = document.getElementById('btn-next-risk');
        const btnStartQuiz = document.getElementById('btn-start-quiz');
        const btnNextQuestion = document.getElementById('btn-next-question');
        const btnRestart = document.getElementById('btn-restart');
        const workerOptions = document.querySelectorAll('.classification-option');
        const riskOptions = document.querySelectorAll('.risk-option');
        const questionContainer = document.getElementById('question-container');
        const quizProgress = document.getElementById('quiz-progress');
        const finalScore = document.getElementById('final-score');
        const resultMessage = document.getElementById('result-message');
        const classificationInfo = document.getElementById('classification-info');
        const questionFeedback = document.getElementById('question-feedback');
        const crackMessage = document.getElementById('crack-message');
        const questionCounter = document.getElementById('question-counter');
        const debugInfo = document.getElementById('debug-info');
        
        // Event Listeners
        btnStart.addEventListener('click', () => {
            showStep('step-workers');
        });
        
        btnNextRisk.addEventListener('click', () => {
            showStep('step-risk');
            updateClassificationInfo();
        });
        
        btnStartQuiz.addEventListener('click', () => {
            initializeQuiz();
            showStep('step-questions');
        });
        
        btnNextQuestion.addEventListener('click', () => {
            nextQuestion();
        });
        
        btnRestart.addEventListener('click', () => {
            resetGame();
            showStep('step-intro');
        });
        
        workerOptions.forEach(option => {
            option.addEventListener('click', () => {
                workerOptions.forEach(opt => opt.classList.remove('selected'));
                option.classList.add('selected');
                companySize = option.getAttribute('data-value');
                btnNextRisk.disabled = false;
            });
        });
        
        riskOptions.forEach(option => {
            option.addEventListener('click', () => {
                riskOptions.forEach(opt => opt.classList.remove('selected'));
                option.classList.add('selected');
                riskLevel = option.getAttribute('data-value');
                btnStartQuiz.disabled = false;
                updateClassificationInfo();
            });
        });
        
        // Funciones
        function showStep(stepId) {
            steps.forEach(step => {
                step.classList.remove('active');
            });
            document.getElementById(stepId).classList.add('active');
            currentStep = stepId;
        }
        
        function updateClassificationInfo() {
            if (!companySize || !riskLevel) return;
            
            let standardsCount = 0;
            let questionsCount = 0;
            let description = "";
            
            // CORREGIDO: Cantidad de preguntas seg√∫n especificaci√≥n
            if (companySize === '1-10' && ['I', 'II', 'III'].includes(riskLevel)) {
                standardsCount = 7;
                questionsCount = 4; // 4 preguntas
                description = "Empresas de 1-10 trabajadores con riesgo I, II o III deben cumplir 7 est√°ndares m√≠nimos";
            } else if (companySize === '11-50' && ['I', 'II', 'III'].includes(riskLevel)) {
                standardsCount = 21;
                questionsCount = 7; // 7 preguntas
                description = "Empresas de 11-50 trabajadores con riesgo I, II o III deben cumplir 21 est√°ndares m√≠nimos";
            } else if ((companySize === '1-10' || companySize === '11-50') && ['IV', 'V'].includes(riskLevel)) {
                standardsCount = 60;
                questionsCount = 10; // 10 preguntas
                description = "Empresas de 1-50 trabajadores con riesgo IV o V deben cumplir 60 est√°ndares m√≠nimos";
            } else if (companySize === '51+') {
                standardsCount = 60;
                questionsCount = 10; // 10 preguntas
                description = "Empresas de 51+ trabajadores con cualquier nivel de riesgo deben cumplir 60 est√°ndares m√≠nimos";
            }
            
            classificationInfo.innerHTML = `
                <h3>Resumen de clasificaci√≥n</h3>
                <p><strong>Tama√±o:</strong> ${companySize} trabajadores</p>
                <p><strong>Riesgo:</strong> Nivel ${riskLevel}</p>
                <p><strong>Est√°ndares m√≠nimos:</strong> ${standardsCount}</p>
                <p><strong>Evaluaci√≥n:</strong> ${questionsCount} preguntas</p>
                <p><em>${description}</em></p>
            `;
        }
        
        function initializeQuiz() {
            // CORREGIDO: Cantidad de preguntas seg√∫n especificaci√≥n
            if (companySize === '1-10' && ['I', 'II', 'III'].includes(riskLevel)) {
                totalQuestions = 4; // 4 preguntas
            } else if (companySize === '11-50' && ['I', 'II', 'III'].includes(riskLevel)) {
                totalQuestions = 7; // 7 preguntas
            } else if ((companySize === '1-10' || companySize === '11-50') && ['IV', 'V'].includes(riskLevel)) {
                totalQuestions = 10; // 10 preguntas
            } else if (companySize === '51+') {
                totalQuestions = 10; // 10 preguntas
            }
            
            // Seleccionar preguntas
            const category = (companySize === '1-10' && ['I', 'II', 'III'].includes(riskLevel)) ? '1-10' : 
                            (companySize === '11-50' && ['I', 'II', 'III'].includes(riskLevel)) ? '11-50' : '51+';
            
            const availableQuestions = [...questionBank[category]];
            questions = [];
            
            console.log(`Categor√≠a: ${category}, Preguntas disponibles: ${availableQuestions.length}, Total requerido: ${totalQuestions}`);
            
            // VERIFICACI√ìN CR√çTICA: Asegurar que tenemos suficientes preguntas
            if (availableQuestions.length < totalQuestions) {
                console.warn(`No hay suficientes preguntas. Disponibles: ${availableQuestions.length}, Requeridas: ${totalQuestions}`);
                totalQuestions = availableQuestions.length;
            }
            
            // Seleccionar preguntas aleatorias
            for (let i = 0; i < totalQuestions; i++) {
                if (availableQuestions.length === 0) break;
                
                const randomIndex = Math.floor(Math.random() * availableQuestions.length);
                questions.push(availableQuestions[randomIndex]);
                availableQuestions.splice(randomIndex, 1);
            }
            
            // Actualizar totalQuestions por si no hay suficientes preguntas
            totalQuestions = questions.length;
            
            currentQuestionIndex = 0;
            score = 0;
            
            console.log(`Preguntas seleccionadas: ${questions.length}`);
            
            displayQuestion();
            updateProgress();
        }
        
        function displayQuestion() {
            if (currentQuestionIndex >= totalQuestions) {
                showResults();
                return;
            }
            
            const question = questions[currentQuestionIndex];
            questionCounter.textContent = `Pregunta ${currentQuestionIndex + 1} de ${totalQuestions}`;
            
            // Cambiar texto del bot√≥n si es la √∫ltima pregunta
            if (currentQuestionIndex === totalQuestions - 1) {
                btnNextQuestion.textContent = "Ver Resultados";
            } else {
                btnNextQuestion.textContent = "Siguiente Pregunta";
            }
            
            questionContainer.innerHTML = `
                <div class="question">
                    <h3>${question.question}</h3>
                    <div class="options">
                        ${question.options.map((option, index) => `
                            <div class="option" data-index="${index}">${option}</div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            // Agregar event listeners a las opciones
            const optionElements = questionContainer.querySelectorAll('.option');
            optionElements.forEach(option => {
                option.addEventListener('click', function() {
                    // Prevenir m√∫ltiples clics
                    if (questionContainer.querySelector('.option.correct')) {
                        return;
                    }
                    
                    // Limpiar selecciones anteriores
                    optionElements.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    const selectedIndex = parseInt(this.getAttribute('data-index'));
                    const isCorrect = selectedIndex === question.correct;
                    
                    // Mostrar retroalimentaci√≥n
                    optionElements[question.correct].classList.add('correct');
                    if (!isCorrect) {
                        this.classList.add('incorrect');
                    }
                    
                    // Mostrar mensaje
                    if (isCorrect) {
                        questionFeedback.textContent = "¬°Correcto! üéâ";
                        questionFeedback.className = "feedback positive-feedback";
                        score++;
                    } else {
                        questionFeedback.textContent = "Incorrecto üòï";
                        questionFeedback.className = "feedback negative-feedback";
                    }
                    
                    // Habilitar bot√≥n siguiente
                    btnNextQuestion.disabled = false;
                    
                    // Debug info
                    debugInfo.textContent = `Pregunta ${currentQuestionIndex + 1}/${totalQuestions} - Score: ${score}`;
                });
            });
            
            btnNextQuestion.disabled = true;
            questionFeedback.textContent = "";
            
            // Debug info
            debugInfo.textContent = `Pregunta ${currentQuestionIndex + 1}/${totalQuestions} - Score: ${score}`;
        }
        
        function nextQuestion() {
            currentQuestionIndex++;
            
            if (currentQuestionIndex >= totalQuestions) {
                showResults();
                return;
            }
            
            displayQuestion();
            updateProgress();
        }
        
        function updateProgress() {
            const progress = (currentQuestionIndex / totalQuestions) * 100;
            quizProgress.style.width = `${progress}%`;
        }
        
        function showResults() {
            const percentage = Math.round((score / totalQuestions) * 100);
            finalScore.textContent = `${percentage}%`;
            
            // Determinar est√°ndares
            let standardsCount = 0;
            if (companySize === '1-10' && ['I', 'II', 'III'].includes(riskLevel)) {
                standardsCount = 7;
            } else if (companySize === '11-50' && ['I', 'II', 'III'].includes(riskLevel)) {
                standardsCount = 21;
            } else {
                standardsCount = 60;
            }
            
            if (percentage === 100) {
                resultMessage.textContent = "¬°Felicidades! Dominas completamente los est√°ndares m√≠nimos del SG-SST que aplican a tu empresa.";
                crackMessage.style.display = "block";
                finalScore.classList.add("score-perfect");
            } else if (percentage >= 80) {
                resultMessage.textContent = "¬°Muy bien! Tienes un buen conocimiento de los est√°ndares m√≠nimos del SG-SST.";
                crackMessage.style.display = "none";
            } else if (percentage >= 60) {
                resultMessage.textContent = "Tienes conocimientos b√°sicos, pero hay √°reas importantes que necesitas reforzar.";
                crackMessage.style.display = "none";
            } else {
                resultMessage.textContent = "Es importante que profundices en el conocimiento de los est√°ndares m√≠nimos del SG-SST para tu empresa.";
                crackMessage.style.display = "none";
            }
            
            showStep('step-results');
        }
        
        function resetGame() {
            companySize = '';
            riskLevel = '';
            totalQuestions = 0;
            currentQuestionIndex = 0;
            score = 0;
            questions = [];
            
            workerOptions.forEach(opt => opt.classList.remove('selected'));
            riskOptions.forEach(opt => opt.classList.remove('selected'));
            btnNextRisk.disabled = true;
            btnStartQuiz.disabled = true;
            quizProgress.style.width = '0%';
            classificationInfo.innerHTML = '';
            questionFeedback.textContent = '';
            crackMessage.style.display = 'none';
            finalScore.classList.remove("score-perfect");
            btnNextQuestion.textContent = "Siguiente Pregunta";
            debugInfo.textContent = '';
        }
    </script>
</body>
</html>
